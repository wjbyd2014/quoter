Function countStock(fileName,date);
Begin
    if not fileName then
        return '';

    fileName := "E:\\crawler\\crawler\\行业资金\\通信设备\\result.txt";
    size := rdo2 filesize("", fileName);
    ret := rdo2 readFile(rwraw(), "", fileName, 0, size, data);
    if not ret then
        return '';
        
    stocks := str2array(data, ";");
    for i := 0 to length(stocks) - 1 do
    begin
         if not stocks[i] then
             continue;
             
        stock := str2array(stocks[i], ":");
        stockName := stock[0];
        stockCode := stock[1];
        echo stockName, stockCode;
    end
End;

// 计算股票涨幅
Function getZF(date, stockCode);
Begin
    SetSysParam(PN_Stock(), stockCode);
    EndT:=inttodate(date);
    return StockZf4(EndT);
End;

// 遍历目录中的stock文件
Function iterDir(dirPath);
Begin
    arrFiles := rdo2 filelist("", dirPath + '\\*.stock');
    result := array();
    for i := 0 to length(arrFiles) - 1 do
    begin
        result[i] := dirPath + '\\' + arrFiles[i]['FileName'];
    end
    return result;
End;
